<!--
 * *****************************************************************************
 * Copyright (C) 2025 Thinline Dynamic Solutions
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>
 * ****************************************************************************
-->
<!-- Unauthenticated: show login -->
<ng-container *ngIf="!authenticated">
    <rdio-scanner-admin-login></rdio-scanner-admin-login>
</ng-container>

<!-- Authenticated: show admin panel -->
<ng-container *ngIf="authenticated">

    <!-- Todos / notifications -->
    <rdio-scanner-admin-todos></rdio-scanner-admin-todos>

    <!-- Compact warning bar -->
    <div class="admin-warning-bar">
        <mat-icon>warning</mat-icon>
        <span>Use localhost or a local IP when modifying settings — remote changes over the internet can cause data loss.</span>
    </div>

    <!-- Top-level tab navigation -->
    <mat-tab-group
        class="admin-tab-group"
        [selectedIndex]="selectedTabIndex"
        (selectedTabChange)="onTabChange($event)"
        animationDuration="150ms">

        <!-- ── Config ─────────────────────────────── -->
        <mat-tab>
            <ng-template mat-tab-label>
                <mat-icon class="tab-icon">settings</mat-icon>
                <span class="tab-label">Config</span>
            </ng-template>
            <div class="tab-content">
                <rdio-scanner-admin-config #configComponent></rdio-scanner-admin-config>
            </div>
        </mat-tab>

        <!-- ── Logs ──────────────────────────────── -->
        <mat-tab>
            <ng-template mat-tab-label>
                <mat-icon class="tab-icon">article</mat-icon>
                <span class="tab-label">Logs</span>
            </ng-template>
            <div class="tab-content">
                <rdio-scanner-admin-logs #logsComponent></rdio-scanner-admin-logs>
            </div>
        </mat-tab>

        <!-- ── System Health ─────────────────────── -->
        <mat-tab>
            <ng-template mat-tab-label>
                <mat-icon class="tab-icon">health_and_safety</mat-icon>
                <span class="tab-label">System Health</span>
            </ng-template>
            <div class="tab-content">
                <rdio-scanner-admin-system-health></rdio-scanner-admin-system-health>
            </div>
        </mat-tab>

        <!-- ── Tools ─────────────────────────────── -->
        <mat-tab>
            <ng-template mat-tab-label>
                <mat-icon class="tab-icon">build</mat-icon>
                <span class="tab-label">Tools</span>
            </ng-template>
            <div class="tab-content">
                <rdio-scanner-admin-tools
                    #toolsComponent
                    (config)="configComponent.reset($event, { dirty: true, isImport: true }); selectedTabIndex = 0">
                </rdio-scanner-admin-tools>
            </div>
        </mat-tab>

    </mat-tab-group>


</ng-container>
